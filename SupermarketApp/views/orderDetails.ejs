<%- include('partials/head', { pageTitle: 'Order details', bodyClass: 'page-orders' }) %>

<section class="glass-panel">
  <div class="d-flex justify-content-between flex-wrap align-items-center mb-3">
    <div>
      <h2 class="section-title mb-1">Order #<%= order.id %></h2>
      <p class="subtle-text mb-0">Placed on <%= order.created_at.toLocaleString() %></p>
    </div>
    <a class="btn btn-secondary" href="/orders">Back to orders</a>
  </div>

  <div class="split-layout">
    <div class="summary-card">
      <h4>Total Paid</h4>
      <p class="summary-total">$<%= order.total.toFixed(2) %></p>
      <div class="summary-row">
        <span>Status</span>
        <span class="status-pill success">Delivered</span>
      </div>
      <div class="summary-row">
        <span>Items</span>
        <span><%= order.items.length %></span>
      </div>
      <% if (order.notes) { %>
        <div class="note-card mt-3 text-start">
          <strong>Delivery notes</strong>
          <p class="mb-0"><%= order.notes %></p>
        </div>
      <% } %>
    </div>

    <div class="glass-panel">
      <h5>Items</h5>
      <table class="table-modern mt-3">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <% order.items.forEach(item => { %>
            <tr>
              <td><%= item.productName %></td>
              <td>$<%= item.price.toFixed(2) %></td>
              <td><%= item.quantity %></td>
              <td>$<%= (item.price * item.quantity).toFixed(2) %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</section>

<%- include('partials/footer') %>
